(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{192:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(19),i=a.n(l),o=(a(85),a(28)),c=a(29),s=a(31),u=a(30),d=a(32),m=a(20),p=a(79),k=a(2),f={document:{nodes:[{object:"block",type:"paragraph",nodes:[{object:"text",leaves:[{text:""}]}]}]}};document.title="Rich text Editor";var h=JSON.parse(localStorage.getItem("content")),v=k.n.fromJSON(h||f),b="paragraph",g={document:{last:{type:"paragraph"},normalize:function(e,t){var a=t.code,n=t.node;switch(a){case"last_child_type_invalid":var r=k.a.create("paragraph");return e.insertNodeByKey(n.key,n.nodes.size,r)}}},blocks:{image:{isVoid:!0}}};function y(e,t,a){a&&e.select(a),e.insertBlock({type:"image",data:{src:t}})}function B(e){var t=e.key,a=e.type;return{onKeyDown:function(e,n,r){if(!e.ctrlKey||e.key!==t)return r();e.preventDefault(),n.toggleMark(a)}}}var w=[B({key:"b",type:"bold"}),B({key:"i",type:"italic"}),B({key:"u",type:"underline"}),B({key:"-",type:"strikethrough"}),B({key:"`",type:"code"})],E=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(l)))).state={value:v,nodeLimit:"",saveDisabled:!1},a.onChange=function(e){var t=e.value;a.setState({value:t});var n,r=a.editor.value.document.getBlocks().size,l=a.state.nodeLimit;n=""!==l&&r>l,a.setState({saveDisabled:n})},a.ref=function(e){return a.editor=e},a.hasBlock=function(e){return a.state.value.blocks.some(function(t){return t.type===e})},a.renderConvertTo=function(e,t){return r.a.createElement("button",{onMouseDown:function(t){return a.activateMark(t,e)},title:e},r.a.createElement("i",{className:"fa ".concat(t)}))},a.renderBlockTo=function(e,t){a.hasBlock(e);if("numbered-list"===e||"bulleted-list"===e){var n=a.state.value;if(n.blocks.size>0){var l=n.document.getParent(n.blocks.first().key);a.hasBlock("list-item")&&l&&l.type===e}}return"H1"===t||"H2"===t?r.a.createElement("button",{title:e,onClick:function(t){return a.activateBlock(t,e)}},t):"imageBrowser"===e?r.a.createElement("div",{className:"upload-btn-wrapper"},r.a.createElement("button",{title:e},r.a.createElement("input",{type:"file",id:"input-button",onChange:function(t){return a.activateBlock(t,e)}}),r.a.createElement("i",{className:"fa ".concat(t)}))):r.a.createElement("button",{title:e,onClick:function(t){return a.activateBlock(t,e)}},r.a.createElement("i",{className:"fa ".concat(t)}))},a.activateMark=function(e,t){e.preventDefault(),a.editor.toggleMark(t)},a.activateBlock=function(e,t){e.preventDefault();var n,r=Object(m.a)(Object(m.a)(a)).editor,l=r.value,i=l.document;if("image"===t){var o=prompt("Please enter an image url: ");if(!o)return;r.command(y,o)}if("imageBrowser"===t){(n=e.currentTarget.files[0],new Promise(function(e,t){var a=new FileReader;["image/jpeg","image/jpg","image/png","image/gif"].includes(n.type)?(a.readAsDataURL(n),a.onload=function(){return e(a.result)},a.onerror=function(e){return t(e)}):window.alert("Only jpg, png & gif image files are allowed!")})).then(function(e){r.command(y,e)})}if("bulleted-list"!==t&&"numbered-list"!==t){var c=a.hasBlock(t);a.hasBlock("list-item")?r.setBlocks(c?b:t).unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):r.setBlocks(c?b:t)}else{var s=a.hasBlock("list-item"),u=l.blocks.some(function(e){return!!i.getClosest(e.key,function(e){return e.type===t})});s&&u?r.setBlocks(b).unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):s?r.unwrapBlock("bulleted-list"===t?"numbered-list":"bulleted-list").wrapBlock(t):r.setBlocks("list-item").wrapBlock(t)}},a.renderMark=function(e,t,a){var n=e.mark,l=e.attributes,i=e.children;switch(n.type){case"bold":return r.a.createElement("strong",l,i);case"italic":return r.a.createElement("em",l,i);case"underline":return r.a.createElement("u",l,i);case"code":return r.a.createElement("code",l,i);case"strikethrough":return r.a.createElement("del",l,i);default:return a()}},a.renderNode=function(e,t,a){var n=e.node,l=e.attributes,i=e.children;switch(n.type){case"heading-one":return r.a.createElement("h1",l,i);case"heading-two":return r.a.createElement("h2",l,i);case"paragraph":return r.a.createElement("p",l,i);case"blockquote":return r.a.createElement("blockquote",l,i);case"bulleted-list":return r.a.createElement("ul",l,i);case"numbered-list":return r.a.createElement("ol",l,i);case"list-item":return r.a.createElement("li",l,i);case"code":return r.a.createElement("pre",l,r.a.createElement("code",null,i));case"image":var o=n.data.get("src");return r.a.createElement("img",Object.assign({src:o},l));default:return a()}},a.onKeyDown=function(e,t,n){if(!a.hasBlock("list-item"))return n();var r=t.value,l=r.document,i=r.blocks.first(),o=i?l.getParent(i.key):null;if(!e.shiftKey&&"Tab"===e.key){e.preventDefault();var c=o.type?o.type:"bulleted-list";if(l.getDepth(i.key)>3)return e.preventDefault(),n();o&&t.setBlocks("list-item").wrapBlock(c)}if(e.shiftKey&&"Tab"==e.key){e.preventDefault();var s=i&&l.getDepth(i.key),u=!1;if(r.blocks.map(function(e){var t=l.getDepth(e.key);return u=!(s===t),!0}),u)return n();if(o&&"undefined"===typeof o.type)return t.setBlocks(b).unwrapBlock("bulleted-list").unwrapBlock("numbered-list"),n();var d=l.getDepth(i.key),m=a.hasBlock("list-item")&&i&&("numbered-list"===o.type||"bulleted-list"===o.type),p=a.hasBlock("list-item");m?t.setBlocks("list-item").unwrapBlock("bulleted-list").unwrapBlock("numbered-list"):t.setBlocks(b).unwrapBlock("bulleted-list").unwrapBlock("numbered-list"),p&&d<=2&&t.setBlocks(b).unwrapBlock("list-item").unwrapBlock("bulleted-list").unwrapBlock("numbered-list")}return n()},a.saveContent=function(){var e=JSON.stringify(a.state.value.toJSON());localStorage.setItem("content",e)},a.restoreContent=function(){var e=JSON.parse(localStorage.getItem("content")),t=k.n.fromJSON(e||f);a.setState({value:t})},a.updateNodeLimit=function(e){e.preventDefault();var t,n=parseInt(e.target.limit.value,10),r=a.editor.value.document.getBlocks().size;t=0!==n&&r>n,a.setState({nodeLimit:n,saveDisabled:t})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{id:"editor-wrapper"},r.a.createElement("div",{id:"header"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{id:"title-area"},r.a.createElement("h2",null," Rich Text Editor")),r.a.createElement("div",{id:"toolbar"},this.renderConvertTo("bold","fa-bold"),this.renderConvertTo("italic","fa-italic"),this.renderConvertTo("underline","fa-underline"),this.renderBlockTo("heading-one","H1"),this.renderBlockTo("heading-two","H2"),this.renderBlockTo("paragraph","fa-paragraph"),this.renderBlockTo("blockquote","fa-quote-right"),this.renderBlockTo("numbered-list","fa-list-ol"),this.renderBlockTo("bulleted-list","fa-list-ul"),this.renderBlockTo("image","fa-image"),this.renderBlockTo("imageBrowser","fa-camera-retro")))),r.a.createElement("div",{id:"slate-editor",className:"wrapper"},r.a.createElement(p.a,{ref:this.ref,autoFocus:!0,spellCheck:!1,placeholder:"Start writing..",value:this.state.value,onChange:this.onChange,onKeyDown:this.onKeyDown,renderMark:this.renderMark,renderNode:this.renderNode,plugins:w,schema:g})),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{id:"limiter"},r.a.createElement("form",{onSubmit:this.updateNodeLimit,action:"/",method:"POST"},"Node limit:\xa0",r.a.createElement("input",{name:"limit",type:"number",defaultValue:0,className:"input-number"}),r.a.createElement("button",null,"Set"))),r.a.createElement("div",{id:"menu"},r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{onClick:this.restoreContent},"Cancel"),r.a.createElement("button",{disabled:!!this.state.saveDisabled,onClick:this.saveContent},"Save")))))}}]),t}(n.Component),N=function(e){function t(){return Object(o.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(E,null)}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},80:function(e,t,a){e.exports=a(192)},85:function(e,t,a){}},[[80,2,1]]]);
//# sourceMappingURL=main.e790557c.chunk.js.map